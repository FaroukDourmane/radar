<?php
/*
       /\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\
      |         DESIGNED & DEVELOPED        |
      |                                     |
      |                 BY                  |
      |                                     |
      |   F A R O U K _ D O  U R  M A  N E  |
      |                                     |
      |       dourmanefarouk@gmail.com      |
      |                                     |
      \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/
*/

  require_once(__DIR__."/sessions.php");
  require_once(__DIR__."/functions/main.php");
  deny_self(basename(__FILE__));

  require_once(__DIR__."/connection.php");

  DEFINE("assets", "/radar/assets");

  require_once(lang_file());

  #####################################################
  ## GENERATE TOKEN FOR USERS                        ##
  ##############################################     ##
  if ( !isset($_SESSION["_TOKEN"]) )          ##     ##
  {                                           ##     ##
    $_SESSION["_TOKEN"] = generateToken();    ##     ##
  }                                           ##     ##
  ##############################################     ##
  ## END                                             ##
  #####################################################

  #####################################################
  ## GET USER INFO IF IS LOGGED
  #####################################################
  $_COMPANY = getCompany();
  #####################################################
  ## END
  #####################################################

  #####################################################
  ## USER LOGOUT                                     ##
  ##############################################     ##
  if (  isset($_GET["log"]) &&                ##     ##
   $_GET["log"] == "out" &&                   ##     ##
    isLogged() )                              ##     ##
  {                                           ##     ##
    if( userLogout() ){                       ##     ##
        redirect("index.php");                ##     ##
        exit;                                 ##     ##
    }                                         ##     ##
  }                                           ##     ##
  ##############################################     ##
  ## END                                             ##
  #####################################################


  #####################################################
  ## UPDATE CURRENCY EXCHANGE RATES EVERY 24 HOURS
  #####################################################
  update_rates();
  #####################################################
  ## END
  #####################################################

  if ( !defined("pre_home") )
  {
    define("pre_home", "/radar/");
  }
?>
